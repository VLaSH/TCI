<div class="grid_16 margin_top_20 alpha omega">
<%= uni_form_for(gift, :url => polymorphic_path([ :administrator, gift ]), :html => { :multipart => true }) do |f| %>
  <% f.fieldset(:type => "block", :legend => "Gift Details") do %>
    <%= error_messages(@gift) %>
    <%= f.select(:category, Gift::CATEGORIES.map { |cat| [cat[1], cat[0]] }) %>
    <%= f.select(:course_id, Course.category_3.map { |course| [course.title, course.id] }.unshift(['None', '']),{}, disabled: true) %>
    <%= f.text_field(:title, :size => '255', :label => "Title", :required => true, :style => "width: 99%;") %>
    <%= f.number_field(:lessons_amount, :size => '30', :label => "Amount of lessons", :required => false, :style => "width: 99%;") %>
    <%= f.number_field(:price, :label => "Price $",:style => "width: 99%;") %>
    <%= f.text_area(:description, :label => "Description", :style => "width: 99%;") %>
  <% end %>
  <p class="buttons"><%= pretty_button (gift.new_record? ? "Create" : "Update"), {:icon_path => "icons/tick.png"} %>
<% end %>
</div>
<script>
jQuery(function ($) {
  toggleDisabled($('#gift_category')[0]);
  
  $('#gift_category').on('change', function(e) {
    toggleDisabled(e.target);
  })

  function toggleDisabled(target) {
    if(target.options[target.selectedIndex].value === '3') {
      $('#gift_course_id').attr('disabled', false)
    } else {
      $('#gift_course_id').attr('disabled', true)      
    }
  }
});
</script>
